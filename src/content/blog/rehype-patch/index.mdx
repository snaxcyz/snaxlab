---
title: Suckless tools oâ€˜rnatish, sozlash va zaxira nusxasini yaratish boâ€˜yicha nimadirlar
description: 'minimalist, tezkor va engil nimadirlar yaratish, dwm, st, va dmenu kabi suckless vositalarini qanday oâ€˜rnatish, sozlash, patch qilish va zaxiralash '
date: 2024-10-24
tags: ['linux', 'suckless', 'dwm', 'st', 'dmenu']

image: './banner.jpg'
authors: ['snaxcyz']
---
<div style={{ marginTop: '2rem', fontStyle: 'italic', color: '#888' }}>
This post has been read <strong>{Math.floor(Math.random() * (1000 - 100 + 1) + 300)}</strong>ğŸ‘ï¸ times.
</div>

## Kirish

_Suckless_ vositalari(tools) xususan `dwm`, `st` va `dmenu`.Taxminan bir yil avval `dwm`, `st` va `dmenudan` foydalangan edim, lekin ularni qanday boshqarish, sozlash yoki zaxiralashni bilmasdim
Ularni qanday moslashtirish (patchlash) haqida maâ€™lumot ham yo`q (edi).

Ushbu qoâ€˜llanmada maqsadim â€” yo'q shunchaki o'zim uchun yozib qo'yyapman boshqalari kabi.O`rgangan narsalarim asosida yozilgan ammo mukammal emas.
Qoâ€˜llanmada Linux boâ€˜yicha asosiy nimadirlar bor deb hisoblayMAN: masalan, distributivni paket menejeri orqali dastur oâ€˜rnatishni, kerakli kutubxonalar, va xinit orqali xorg sessiyasiga kirish.

## Oâ€˜rnatish

Yuqorida tilga olingan (dwm, st, dmenu) dasturlardan birontasini oâ€˜rnatish uchun tizimingizda baâ€™zi kerakli kutubxonalar va git oâ€˜rnatilgan boâ€˜lishi kerak. Ularni quyidagicha oâ€˜rnatishingiz mumkin:

Void Linuxâ€™da:

```
sudo xbps-install -S git make libX11-devel libXinerama-devel
```

Debian va Debian asosidagi distributivlarda:

```
sudo apt-get install build-essential libx11-dev libxinerama-dev sharutils
```

Arch va Arch asosidagi distributivlarda:

```
sudo pacman -S git make libx11 libxinerama
```

### dwm

dwmni suckless.orgâ€™dan klon qilish

```
git clone https://git.suckless.org/dwm
cd dwm/
make
sudo make install
```

Endi qolgan yagona narsa â€” quyidagi qatorni .xinitrc faylga yozish va startx buyrugâ€˜i orqali X sessiyani ishga tushurish:
`exec dwm`

### st

stni suckless.orgâ€™dan klon qilish:

```
git clone https://git.suckless.org/st
cd st/
make
sudo make install
```

Eslatma:
st odatda .desktop fayl bilan birga kelmaydi, yaâ€™ni uni menyularda (dmenu yoki boshqa AppMenuâ€™larda) koâ€˜rmaysiz/miz.
Ammo, dwm oynali muhitida st standart terminal hisoblanadi va unga ALT + Shift + Enter orqali kirish mumkin.

### dmenu

dmenuni suckless.orgâ€™dan klon qilish:

```
git clone https://git.suckless.org/dmenu
cd dmenu/
make
sudo make install
```

shu bilan o'rnatiladi,`Alt+p` bilan `dmenu`ni ishga tushirish mumkin.

## Sozlash

Hop,endi ranglarni o'zgartirish, patchlar orqali funksiyalarni qo'shish va dasturlarni o'zimizga moslashtirishni ko'ramiz

Eslatma:
Tavsiya qilinadi: `config.def.h` faylining nusxasini olib, `config.h` deb nomlang va oâ€˜zgartirishlarni aynan shu yangi faylga kiriting. Shunda, masalan `dwm` yangilanganida, yangi `config.def.h` sizning oâ€˜zgartirgan faylingizni ustiga yozib yubormaydi.

### dvm

wmni tahrirlash uchun siz dwm papkasiga kirishingiz va config.def.h faylini tahrirlashingiz kerak boâ€˜ladi.
Eslatma: Kompilyatsiya qilishdan oldin config.h faylini oâ€˜chirib tashlashlang (yuqoridagi eslatma). Quyida esa konfiguratsiya faylining baâ€™zi qismlari:

#### Shrift va rang sxemasi

config.def.h faylining 8- va 9-qatorlarida, `dwm`da ishlatiladigan shrift va shrift oâ€˜lchamini belgilash mumkin.
Agar `dmenu`ni alohida tahrirlamoqchi boâ€˜lmasangiz, u holda `dmenu`ni ishga tushirishda `dwm` tomonidan belgilanadigan parametrlar orqali shriftni sozlashingiz mumkin â€” bu esa 59-qatorda koâ€˜rsatilgan.

10-chi qatordan 19-gacha esa siz quyidagi konfiguratsiyani koâ€˜rasiz:

```
static const char col_gray1[]       = "#222222";
static const char col_gray2[]       = "#444444";
static const char col_gray3[]       = "#bbbbbb";
static const char col_gray4[]       = "#eeeeee";
static const char col_cyan[]        = "#005577";
static const char *colors[][3]      = {
	/*               fg         bg         border   */
	[SchemeNorm] = { col_gray3, col_gray1, col_gray2 },
	[SchemeSel]  = { col_gray4, col_cyan,  col_cyan  },
};
```

10-chi qatordan 15-gacha boâ€˜lgan qatorlarda `char` (belgilar) turidagi ayrim konstantalar eâ€™lon qilingan.
Bular â€” olti xil rang boâ€˜lib, ularni xohlagancha oâ€˜zgartirishingiz mumkin. Hattoki, ularning nomlarini ham.
Masalan, quyidagicha:

```
static const char normalbg[]       = "#0ff000";
```

Keyin esa, 17- va 18-qatorlarda, siz/biz bu yuqorida belgilangan rang konstantalarini `SchemeNorm` va `SchemeSel` deb nomlangan sxemalarga ulab qoâ€˜yasiz/miz.
Bu sxemalar colors massivida aniqlanadi.
Quyidagicha:

```
[SchemeNorm] = { fg, bg, border },
[SchemeSel]  = { fg, bg, border },
```

xoxlagancha o'zgartirib,soâ€˜ngra quyidagicha qayta kompilyatsiya va oâ€˜rnatish qiling:

```
sudo make clean install
```

dwm sessiyasidan chiqib, qayta kirishingiz kerak â€” shunda oâ€˜zgartirishlaringiz kuchga kiradi.

#### Qoidalar (Rules)

30â€“31-qatorlarda `gimp` va `Firefox` uchun yozilgan baâ€™zi qoidalarni koâ€˜rish mumkin:

```
/* class      instance    title       tags mask     isfloating   monitor */
{ "Gimp",     NULL,       NULL,       0,            1,           -1 },
{ "Firefox",  NULL,       NULL,       1 << 8,       0,           -1 },
```

bu yerga boshqa dasturlar uchun ham qoidalar yozishingiz yoki borini olib tashlash mumkin.
Qanday ishlaydi:

    class â€” bu dastur klassi (nomi), masalan "Gimp" yoki "Firefox".

    instance va title â€” koâ€˜pincha NULL deb qoldiriladi.

    isfloating â€” agar 1 deb belgilansa, dasturni floatingda  ochadi. 0 boâ€˜lsa, tiled rejimda.

    monitor â€” qaysi monitor(da) ochilishini belgilaydi. -1 boâ€˜lsa, istalgan monitor.

Tag mask (teglarga tayinlash)
Murakkab qism.
tags mask â€” bu bitwise operatorlardan foydalangan holda aniqlanadi.

Misol uchun, agar Firefoxni 9-tegda ochmoqchi boâ€˜linsa, `1 << 8` deb yoziladi:

` 1 << 8` degani: 1 ni 8 pozitsiyaga chapga siljitish â€“ bu 100000000 degani, yaâ€™ni 9-tag.

    Teglar odatda bitlar sifatida qaraladi: 000000001, 000000010, 000000100, ...bla bla bla ble nima bu wtf  xullas

Yaâ€™ni:

    ```
    1 << 0 â†’ tag 1 (eng oâ€˜ngda)

    1 << 1 â†’ tag 2

    1 << 2 â†’ tag 3

    ...

    1 << 8 â†’ tag 9 (eng chapda)

```
Misol: Emacsâ€™ni 3-tegda va floating rejimda ochish

```

{ "Emacs", NULL, NULL, 1 << 2, 1, -1 },

````
Bu `Emacs`sni:

   3-tegda (```1 << 2 = 000000100```)

    floating rejimda

    har qanday monitor(da) ``(-1)`` ochad

#### Tugma birikmalari (Keybindings)

Men bu qoâ€˜llanmada tugma birikmalarini (hotkeys)ni yozmayman, `sxhkd` (Simple X Hotkey Daemon)ishlataman.
Ammo agar  `dwm`ning oâ€˜zida tugma birikmalarini sozlamoqchi boâ€˜lsanglar, yoki faqat bir nechta standart tugmalarni oâ€˜zgartirmoqchi "boâ€˜lsangiz",  46-chi qatoridan 96-gacha qarab chiqing,uncha qiyinmas.Maslahat `sxhkd` ishlatinglar


### st

Simple Terminal (st) â€” tez ishlaydi,mening fikrimcha, shriftlarni chiroyli chiqarishda Alacrittyâ€™dan keyin turadi.
Biroq, standart holatda st'da baâ€™zi asosiy funksiyalar yoâ€˜q,demak "Patching" ga yuzlanamiz.
Oddiy sozlamalar, yaâ€™ni tugma birikmalari (keybindings) va rang sxemalarini (color scheme) oâ€˜zgartirmoqchi boâ€˜lsangiz â€” bu jarayon `dwm` bilan bir xil:
1. st papkasiga kiring

2. `config.def.h` faylini tahrirlang

3. `config.h` faylini oâ€˜chirib tashlang (agar mavjud boâ€˜lsa)

4. Yangi sozlamalar kuchga kirishi uchun qayta kompilyatsiya qiling

#### Shrift (Font) va Padding
Agar `st` terminalining shriftini va padding sozlamasini oâ€˜zgartirmoqchi boâ€˜lsangiz, 8- va 9-qatorlarni tahrirlaysiz.

Masalan,shriftni Hack, oâ€˜lchamini 14 piksel, va paddingni 8 piksel qilishni istasangiz, quyidagicha yozasiz:
```
static char *font = "Hack:pixelsize=14:antialias=true:autohint=true";
static int borderpx = 8;
```
#### Rang sxemasi (Color-scheme)
Agar `st`ning standart rang sxemasini oâ€˜zgartirmoqchi boâ€˜lsangiz, 86-qatoridan 112-qatorigacha boâ€˜lgan joyni tahrirlashingiz kerak:
```
static const char *colorname[] = {
	/* 8 normal colors */
	"black",
	"red3",
	"green3",
	"yellow3",
	"blue2",
	"magenta3",
	"cyan3",
	"gray90",

	/* 8 bright colors */
	"gray50",
	"red",
	"green",
	"yellow",
	"#5c5cff",
	"magenta",
	"cyan",
	"white",

	[255] = 0,

	/* more colors can be added after 255 to use with DefaultXX */
	"#cccccc"
	"#555555",
};
```
Istalgancha o'zgartirishga mumkin.

#### Kursor shakli (Cursor Shape)
`st` terminalida quyidagi 4 xil kursor shakli mavjud:
```
/*
 * 2: Block ("â–ˆ")
 * 4: Underline ("_")
 * 6: Bar ("|")
 * 7: Snowman ("â˜ƒ")
 */
 ```

 Kursor shaklini oâ€˜zgartirish uchun 131-qatorni tahrirlab, kerakli raqamni kiritish kerak. Misol:
 ```
 static unsigned int cursorshape = 2;
 ```
yoki:
```
static unsigned int cursorshape = 6;
```

### dmenu

`suckless` dasturlarida boâ€˜lgani kabi, `dmenu`ni sozlash ham `config.def.h` faylini tahrirlash, `config.h` faylini oâ€˜chirish va qayta kompilyatsiya qilish orqali amalga oshiriladi.

`dmenu` â€” bu juda oddiy va moslashuvchan dastur boâ€˜lib, undan juda koâ€˜p narsa uchun foydalanish mumkin. Men uni quyidagilar uchun ishlataman:

    1. Fon (wallpaper) oâ€˜rnatish

    2. monitorlar holatini oâ€˜zgartirish

    3. quvvat menyusi (power-menu)

    bla bla bla ....boshqa nimadirlar

boshlasak

 Eslatma!

Agar `dwm` ichida `dmenu`ning oâ€˜zingiz sozlagan (custom build) versiyasini ishlatmoqchi boâ€˜lsangiz, `dwm/config.def.h` faylida quyidagi qatorni oâ€˜zgartirishingiz kerak:
```
static const char *dmenucmd[] = {
    "dmenu_run", "-m", dmenumon,
    <"-fn", dmenufont, "-nb", col_gray1, "-nf", col_gray3, "-sb", col_cyan, "-sf", col_gray4,>
    NULL
};
```
tepadagi qatorda `< >` ichidagi qismlar oâ€˜chirilishi kerak. Yaâ€™ni, siz bu joylarni `dmenu`ning oâ€˜zida sozlaysiz, `dwm` ichida emas.

#### Shrift (Font) va Rang sxemasi (Color-scheme)

 Shriftni oâ€˜zgartirish:

7-qatorga boring va shrift nomini istaganingizga oâ€˜zgartiring:
```
"monospace:size=10"
```
masalan menga yoqadigan Hack shrifti uchun:
```
"Hack:size=12"
```
Ranglarni oâ€˜zgartirish:

Bu yerda ranglar *colors massivida belgilanadi, `dvm` dagidek emas:
```
[SchemeNorm] = { "#bbbbbb", "#222222" }, // Oddiy holat (Normal)
[SchemeSel]  = { "#eeeeee", "#005577" }, // Tanlangan (Selected)
[SchemeOut]  = { "#000000", "#00ffff" }  // Tashqi chiqish (Output)
```

1. Har bir qatordagi birinchi rang â€” matn (foreground),

2. ikkinchi rang â€” fon (background).

ğŸ¥ Qoâ€˜shimcha tavsiya:

Agar `dmenu` haqida chuqurroq tushunmoqchi boâ€˜lsangiz, Luke Smithâ€™ning videolarini koâ€˜rishni tavsiya qilamam.O`zim ha o'sha yerdan o'rganganman.

## Patching â€” Tuzatmalar
(o'zimcha shunaqa tarjima qildim)

Tuzatmalar (patches) yordamida `suckless` vositalariga ularning standartda mavjud boâ€˜lmagan imkoniyatlarini qoâ€˜shishingiz mumkin. Masalan, `st` terminalida orqaga aylantirish (scrollback) yoki `dwm`da gaps.

### Patch qoâ€˜llash tartibi:

    1. suckless.org saytidan kerakli patchâ€™ni yuklab olish.

    2. Patch faylini mos dastur manba (source-code) papkasiga joylashtirish.

    3,. Terminalda quyidagi buyruqlarni bajarish:

    ```
    sudo make clean
    git remove config.h
    git branch <patch_nomi>.def
    git checkout <yangi_branch_nomi>
    patch -p1 < <patch_nomi>.diff
```
Agar barcha `hunk`lar ishlasa, keyingi qadamlar:
```
git status # oâ€˜zgarishlar roâ€˜yxatini tekshiring
git add <oâ€˜zgargan_fayllar>
git commit -m "Patched with <patch_nomi>"
git checkout master
git merge <yangi_branch_nomi>
make
sudo make install
```
Lekin menda birinchi safar `hunk` ishlamagan,shunda nima qilish kerak?
Terminal xatolik haqida qaysi faylga patch qoâ€˜llanmaganini koâ€˜rsatadi.

Shu fayl ichida .rej fayli hosil boâ€˜ladi.

.rej faylini oching.

- bilan boshlangan qatorlar â€” oâ€˜chirilishi kerak, + bilan boshlanganlar â€” qoâ€˜shilishi kerak.

Qoâ€˜lda oâ€˜zgartiring, keyin yuqoridagilarni qayta kiriting.

Patchni remove qilish:

Agar ilgari qoâ€˜llagan patchni olib tashlamoqchi boâ€˜lsangiz:
```
patch -R < <patch_nomi>.diff
```

Qoâ€˜shimcha maâ€™lumot:

    suckless.orgdagi Hacking sahifasida â€” patchlar haqida koâ€˜proq oâ€˜rganish mumkin.

    DistroTubeâ€™ning dmenu patchlash boâ€˜yicha videosi ham yaxshi manba.


## Zaxira nusxa olish (Backup)
Suckless vositalarini sozlaganingizdan keyin, oddiy `.config` faylini `git`ga yuklashdek oson EMAS, ayniqsa patchlar qoâ€˜llagan keyin. Ammo yo'li bor)
 ### Git sozlamasi:
    1. Ishlayotgan papkangizda (masalan dwm/, st/ yoki dmenu/) quyidagini bajaring:
    ```
    git remote rename origin upstream
```
    Bu sizning asosiy manbangizni (upstream) sifatida suckless.orgâ€™ga bogâ€˜laydi.

    2. Github (yoki Gitlab) da yangi repozitoriya yarating. Nomini `dwm`, `st` yoki `dmenu` deb qoâ€˜ying.

    3. Repozitoriyaning URL manzilini oling va quyidagicha qoâ€˜shing:
    ```
    git remote add origin <sizning repozitoriyangiz URL manzili>
```
4. endi tekrish kerak:

Sizda quyidagilar boâ€˜lishi kerak:
```
upstream    https://git.suckless.org/dwm (fetch)
origin      https://github.com/username/dwm.git (push)
```
5. Endi sozlagan va patch qoâ€˜shgan holatingizni master branchga yuklang:
```
git push origin master
```


### Yangilanishlarni olish:

Agar suckless loyihasi yangilansa, siz uni quyidagicha olishingiz mumkin:
```
git pull upstream master
```

## Yakuniy fikr

 YO'Q

Ishlamadimi? bilmadim menda ishladi)